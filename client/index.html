<!-- Replace the entire index.html with this file content (or merge the tawk section before </body>) -->
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>GRC Consulting</title>
    <link rel="stylesheet" href="/assets/css/grc-augment.css">
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    <script src="/assets/js/grc-augment.js"></script>

    <!-- Tawk.to consent loader -->
    <script>
    (function(){
      var TAWK_EMBED_URL = 'https://embed.tawk.to/691056525ee0901956279862/1j9jt2d6p';
      function loadTawk(){
        if (window.__TAWK_LOADED) return;
        var s = document.createElement('script');
        s.async = true;
        s.src = TAWK_EMBED_URL;
        s.charset = 'UTF-8';
        s.setAttribute('crossorigin','*');
        document.head.appendChild(s);
        window.__TAWK_LOADED = true;
      }

      var consent = localStorage.getItem('tawk_consent'); // 'accepted' / 'declined' / null

      // If previously accepted, load automatically
      if (consent === 'accepted') loadTawk();

      // Insert banner if consent not set
      if (!consent){
        var banner = document.createElement('div');
        banner.id = 'tawk-cookie-banner';
        banner.style = 'position:fixed;right:20px;bottom:20px;max-width:360px;background:#fff;border:1px solid rgba(0,0,0,0.08);padding:12px;border-radius:10px;z-index:99999;font-family:Inter,Arial,sans-serif';
        banner.innerHTML = '<p style="margin:0 0 8px;font-weight:600">Live chat (Tawk.to)</p><div style="font-size:13px;margin-bottom:10px">Allow chat to enable instant support. We will only enable the widget after you accept.</div><div style="text-align:right"><button id="tawk-decline" style="margin-right:8px;padding:8px 10px;border-radius:6px;border:1px solid #ddd;background:#f3f4f6">Decline</button><button id="tawk-accept" style="padding:8px 10px;border-radius:6px;background:#0b5fff;color:#fff;border:0">Accept & Enable Chat</button></div>';
        document.body.appendChild(banner);
      }

      // Create quick enable button (hidden unless user declines)
      var quick = document.createElement('button');
      quick.id = 'tawk-quick-btn';
      quick.title = 'Enable chat';
      quick.innerHTML = 'ðŸ’¬';
      quick.style = 'position:fixed;right:20px;bottom:24px;width:56px;height:56px;border-radius:50%;display:none;align-items:center;justify-content:center;box-shadow:0 8px 24px rgba(0,0,0,0.08);background:#0b5fff;color:#fff;border:none;z-index:99998;cursor:pointer;font-size:20px';
      document.body.appendChild(quick);

      document.addEventListener('click', function(e){
        var id = (e.target && e.target.id) || (e.target && e.target.closest && e.target.closest('button') && e.target.closest('button').id);
        if (!id) return;
        if (id === 'tawk-accept'){
          localStorage.setItem('tawk_consent','accepted');
          loadTawk();
          var b = document.getElementById('tawk-cookie-banner'); if (b) b.remove();
          quick.style.display = 'none';
        } else if (id === 'tawk-decline'){
          localStorage.setItem('tawk_consent','declined');
          var b = document.getElementById('tawk-cookie-banner'); if (b) b.remove();
          quick.style.display = 'flex';
        } else if (id === 'tawk-quick-btn'){
          localStorage.setItem('tawk_consent','accepted');
          loadTawk();
          quick.style.display = 'none';
          var b = document.getElementById('tawk-cookie-banner'); if (b) b.remove();
        }
      });

      quick.addEventListener('click', function(){
        localStorage.setItem('tawk_consent','accepted');
        loadTawk();
        quick.style.display = 'none';
      });

      // if previously declined -> show quick button so they can enable later
      if (consent === 'declined') quick.style.display = 'flex';
    })();
    </script>
  </body>
</html>
